{% extends 'salon/base_perfectcut.html' %}
{% load static %}

{% block title %}Blog - {{ site_settings.site_name|default:'Aarushi Salon' }}{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="blog-hero-section" style="min-height: 40vh; padding-top: 100px; background: linear-gradient(135deg, rgba(139, 90, 60, 0.9), rgba(166, 124, 82, 0.9)), url('{% static 'img/hero-bg.jpg' %}') center/cover;">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <div class="hero-content text-white">
                    <h1 class="hero-title">Our Blog</h1>
                    <p class="hero-subtitle">Latest beauty tips and trends from our experts</p>
                    <div class="hero-features">
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Expert Tips</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Latest Trends</span>
                        </div>
                        <div class="feature-item">
                            <i class="fas fa-check-circle"></i>
                            <span>Beauty Advice</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Blog Section -->
<section class="blog-section py-5">
    <div class="container">
        {% if blog_posts %}
        <div class="row">
            {% for post in blog_posts %}
            <div class="col-lg-4 col-md-6 mb-4">
                <div class="blog-card h-100">
                    <div class="blog-image position-relative overflow-hidden">
                        {% if post.featured_image %}
                            <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" class="img-fluid w-100" style="height: 250px; object-fit: cover;">
                        {% else %}
                            <img src="{% static 'img/blog-1.jpg' %}" alt="{{ post.title }}" class="img-fluid w-100" style="height: 250px; object-fit: cover;">
                        {% endif %}
                        <div class="blog-overlay">
                            <a href="{% url 'salon:blog_detail' post.slug %}" class="btn btn-primary btn-sm">Read More</a>
                        </div>
                    </div>
                    <div class="blog-content p-4">
                        <div class="blog-meta mb-3">
                            <span class="me-3"><i class="fa fa-calendar text-primary me-1"></i>{{ post.created_at|date:"M d, Y" }}</span>
                            <span class="me-3"><i class="fa fa-user text-primary me-1"></i>{{ post.author }}</span>
                            <span><i class="fa fa-eye text-primary me-1"></i>{{ post.view_count }}</span>
                        </div>
                        {% if post.get_tags_list %}
                        <div class="blog-tags mb-3">
                            {% for tag in post.get_tags_list|slice:":3" %}
                            <span class="badge bg-light text-dark me-1">{{ tag }}</span>
                            {% endfor %}
                        </div>
                        {% endif %}
                        <h4 class="blog-title mb-3">{{ post.title }}</h4>
                        <p class="blog-excerpt text-muted">{{ post.excerpt|default:post.content|truncatewords:25 }}</p>
                        <div class="blog-footer d-flex justify-content-between align-items-center">
                            <a href="{% url 'salon:blog_detail' post.slug %}" class="btn btn-outline-primary btn-sm">Read More</a>
                            <small class="text-muted">{{ post.comments.count }} comments</small>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <!-- Pagination -->
        {% if page_obj.has_other_pages %}
        <nav aria-label="Blog pagination">
            <ul class="pagination justify-content-center">
                {% if page_obj.has_previous %}
                <li class="page-item">
                    <a class="page-link" href="?page=1">&laquo; First</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.previous_page_number }}">Previous</a>
                </li>
                {% endif %}
                
                <li class="page-item active">
                    <span class="page-link">
                        Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
                    </span>
                </li>
                
                {% if page_obj.has_next %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.next_page_number }}">Next</a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">Last &raquo;</a>
                </li>
                {% endif %}
            </ul>
        </nav>
        {% endif %}
        {% else %}
        <div class="text-center">
            <h3>No blog posts available</h3>
            <p>Check back soon for our latest beauty tips and trends!</p>
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}
